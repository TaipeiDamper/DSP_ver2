# 2026-02-10 學習筆記：現代 CMake 基礎與指令簡化

## 1. 核心觀念：從「手動」轉向「現代化」
今天從零開始重新建構了對 CMake 的理解，特別是撇開了傳統繁瑣的資料夾切換動作。

### 現代 CMake 兩大金律
不需要再手動 `mkdir`, `cd`, `..`。現在只需要在專案根目錄記住這兩行：

1. **配置 (Configuration)**
   - **現代指令**：`cmake -B build`
   - **意義**：直接叫 CMake 建立 `build` 資料夾並在裡面產生專案檔（如 `.sln`）。
   - **優點**：人留在根目錄，資料夾清爽且不會迷路。

2. **編譯 (Build)**
   - **現代指令**：`cmake --build build`
   - **意義**：不需要進去 `build` 資料夾，直接從外面叫它開始編譯。
   - **優點**：跨平台統一（Windows/Mac 指令都一樣）。

## 2. CMakeLists.txt 的基礎結構
```cmake
# 基礎三劍客
cmake_minimum_required(VERSION 3.15)  # 設定版本門檻
project(ProjectName LANGUAGES CXX)      # 專案代號與語言
add_executable(AppFileName main.cpp)    # 定義：[輸出檔名] [原始碼路徑]
```

## 3. 重要名詞釐清
*   **.sln (Solution)**：Visual Studio 的帳本，由 CMake 根據腳本「翻譯」出來。
## 4. CMake 指令集對照表 (核心記憶)

| 類型 | 第一步：設定藍圖 (Configuration) | 第二步：執行動工 (Build) |
| :--- | :--- | :--- |
| **基礎版 (手動派)** | `cmake -B build` | `cmake --build build` |
| **專業版 (套餐派)** | `cmake --preset default` | `cmake --build --preset default` |

## 5. JUCE 插件核心架構與生命週期 (Plugin Lifecycle)

### 核心分工：Editor vs Processor
*   **Processor (演算法核心)**：
    *   **重點**：這是 Plugin 的靈魂，負責所有音訊運算。
    *   **存在性**：只要 Plugin 被載入，Processor 就會一直存在，直到被移除。
*   **Editor (介面設計)**：
    *   **特性**：可以重複出現或消失（取決於使用者是否打開 UI 視窗），甚至可以完全沒有介面。
    *   **地位**：它是 Processor 的「外部控制殼」。

### Processor 的三大關鍵函式 (生命週期)
1.  **`prepareToPlay(sampleRate, samplesPerBlock)`**：
    *   **時機**：在音訊開始處理前的「準備階段」。
    *   **用途**：設定 `sampleRate`、初始化 Buffer、預熱濾波器等任何啟動前所需的準備。
    *   **關鍵**：如果使用者更改了 DAW 的採樣率，這個函式會被**重新呼叫**。
2.  **`processBlock(buffer, midiMessages)`**：
    *   **時機**：音訊處理的核心循環。
    *   **運作**：一次處理一個 Block（一塊音訊數據）。這是 DSP 邏輯真正運作的地方。
3.  **`releaseResources()`**：
    *   **時機**：Plugin 即將被清除前。
    *   **用途**：釋放佔用的記憶體、關閉檔案、清理不需要的資源。

---
