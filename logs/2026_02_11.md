# 2026-02-11 學習筆記：C++ Lambda 與 函式物件 (Functional Programming)

## 1. 核心觀念：Lambda 表達式 (Lambda Expressions)
今天接觸到了 C++ 中非常強大且在 JUCE 裡極其常用的語法 —— Lambda（匿名函式）。它允許我們在需要的地方「原地」定義一個小功能。

### 語法大解析 (公式)

> **std::function< `返回型別`( `參數型別` ) > `名稱` = [ `捕獲列表` ]( `輸入參數` ) { `函式內容` };**

```cpp
// 具體範例：
std::function<float(float)> dBToGain = [](float db) { 
    return std::pow(10.0f, db / 20.0f); 
};
```
> **注意**：`std::function` 的模板參數順序是 `<返回型別(參數型別)>`。例如：`std::function<float(float)>` 代表輸入一個 float，返回一個 float。

### 拆解部分
1. **`std::function<...>`**：容器，用來存放這個函式。
2. **`[捕獲列表]` (Capture List)**：讓 Lambda 可以使用「外部」的變數。
   - `[&]`：按引用捕獲（可以用外部變數且會同步）。
   - `[=]`：按值捕獲（複製一份外部變數）。
   - `[this]`：捕獲當前類別的指標（在 JUCE 類別中常用）。
3. **`(輸入參數)`**：跟一般函式的參數一樣。
4. **`{ 函式內容 }`**：你要執行的 DSP 邏輯或處理。

## 2. 實戰應用：JUCE dsp::Oscillator
今天看到了一個極佳的範例，展示了 Lambda 如何在 DSP 引擎中使用：

```cpp
juce::dsp::Oscillator<float> lfo{ [](auto phase) { return std::sin(phase); } };
```
*   **解釋**：宣告一個名為 `lfo` 的震盪器。
*   **關鍵點**：JUCE 提供底層的「相位管理」與「頻率管理」，而我們透過 Lambda 將**「聲音產生的演算法 (std::sin)」**注入進去。
*   **優點**：同一套引擎，只要換掉 Lambda 就能瞬間從正弦波變為任何自定義波形。

## 3. 為什麼在 DSP/JUCE 中很重要？
... (後續內容)

---
